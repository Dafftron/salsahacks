const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/HomePage-BsJ_k2TS.js","js/vendor-router-UcgXoTZX.js","js/vendor-react-SlK7pBj5.js","js/vendor-icons-BWQzNHDY.js","js/vendor-firebase-CCu_Fqhx.js","js/NotasPage-tt3xnLUf.js","js/CategoriesPage-D-ENWaGS.js","js/FigurasPage-DiHenXlL.js","js/CompactCardActions-nyC9B9nV.js","js/ConfirmModal-DAyGJZmo.js","js/Toast-Byppis9I.js","js/sequences-DM4W3PfV.js","js/index-CKQjJMH2.js","js/EscuelaPage-CsLMD1u-.js","js/AdminPage-0Q6SmpB2.js","js/AuthPage-DvgGvUmt.js","js/ProfilePage-CFGC2a1A.js","js/SettingsPage-Dg6HaX7M.js","js/InvitePage-LooNV4Wq.js","js/videoCombiner-5iDQDamN.js","js/VideoPlayer-D1f-kd4k.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(t,r,s)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,a=(e,t)=>{for(var r in t||(t={}))i.call(t,r)&&n(e,r,t[r]);if(s)for(var r of s(t))o.call(t,r)&&n(e,r,t[r]);return e},l=(e,s)=>t(e,r(s)),c=(e,t,r)=>new Promise((s,i)=>{var o=e=>{try{a(r.next(e))}catch(t){i(t)}},n=e=>{try{a(r.throw(e))}catch(t){i(t)}},a=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,n);a((r=r.apply(e,t)).next())});import{r as d,b as u,a as m}from"../js/vendor-react-SlK7pBj5.js";import{b as g,L as h,N as f,B as p,R as y,c as v}from"../js/vendor-router-UcgXoTZX.js";import{i as E,h as x,j as S,k as _,m as A,n as b,G as j,p as N,t as P,v as I,x as w,y as R,q as D,c as U,w as O,o as M,a as T,d as C,u as L,s as k,z as V,A as F,g as z,B,e as q,b as W,C as G}from"../js/vendor-firebase-CCu_Fqhx.js";import{LucideMusic as $,LucideMenu as H,LucideSearch as K,LucideSun as J,LucideMoon as Y,Bell as Q,Heart as X,LucideUser as Z,LucideShield as ee}from"../js/vendor-icons-BWQzNHDY.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var te={exports:{}},re={},se=d,ie=Symbol.for("react.element"),oe=Symbol.for("react.fragment"),ne=Object.prototype.hasOwnProperty,ae=se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,le={key:!0,ref:!0,__self:!0,__source:!0};function ce(e,t,r){var s,i={},o=null,n=null;for(s in void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(n=t.ref),t)ne.call(t,s)&&!le.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===i[s]&&(i[s]=t[s]);return{$$typeof:ie,type:e,key:o,ref:n,props:i,_owner:ae.current}}re.Fragment=oe,re.jsx=ce,re.jsxs=ce,te.exports=re;var de,ue=te.exports,me={},ge=u;de=me.createRoot=ge.createRoot,me.hydrateRoot=ge.hydrateRoot;const he=Object.freeze(Object.defineProperty({__proto__:null,get createRoot(){return de},default:me},Symbol.toStringTag,{value:"Module"})),fe={},pe=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));s=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in fe)return;fe[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,r&&i.setAttribute("nonce",r),document.head.appendChild(i),t?new Promise((t,r)=>{i.addEventListener("load",t),i.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})},ye=d.createContext(),ve=()=>{const e=d.useContext(ye);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},Ee=({children:e})=>{const[t,r]=d.useState("salsa");d.useEffect(()=>{const e=localStorage.getItem("theme")||"salsa";r(e),document.documentElement.setAttribute("data-theme",e)},[]);const s={theme:t,changeTheme:e=>{r(e),localStorage.setItem("theme",e),document.documentElement.setAttribute("data-theme",e)},isDark:"dark"===t,isLight:"light"===t,isSalsa:"salsa"===t};return ue.jsx(ye.Provider,{value:s,children:e})},xe=E({apiKey:"AIzaSyBxqEJAHyV4jyeE1-GW-dOeECyLXRAsjiM",authDomain:"salsahacks-a9cac.firebaseapp.com",projectId:"salsahacks-a9cac",storageBucket:"salsahacks-a9cac.firebasestorage.app",messagingSenderId:"934621871243",appId:"1:934621871243:web:9107fa3b61d9b9928fa88e"}),Se=x(xe),_e=S(xe),Ae=_(xe),be=Object.freeze(Object.defineProperty({__proto__:null,auth:Se,db:_e,default:xe,storage:Ae},Symbol.toStringTag,{value:"Module"})),je=(e,t,r)=>c(void 0,null,function*(){try{const s=yield P(Se,e,t);return r&&(yield I(s.user,{displayName:r})),{user:s.user,error:null}}catch(s){return{user:null,error:s.message}}}),Ne=(e,t)=>c(void 0,null,function*(){try{return{user:(yield b(Se,e,t)).user,error:null}}catch(r){return{user:null,error:r.message}}}),Pe=()=>c(void 0,null,function*(){try{const e=new j;return{user:(yield N(Se,e)).user,error:null}}catch(e){return{user:null,error:e.message}}}),Ie=()=>c(void 0,null,function*(){try{return yield w(Se),{error:null}}catch(e){return{error:e.message}}}),we=e=>c(void 0,null,function*(){try{return yield R(Se,e),{error:null}}catch(t){return{error:t.message}}}),Re=e=>A(Se,e),De=Object.freeze(Object.defineProperty({__proto__:null,getCurrentUser:()=>Se.currentUser,loginWithEmail:Ne,loginWithGoogle:Pe,logout:Ie,onAuthStateChange:Re,registerWithEmail:je,resetPassword:we},Symbol.toStringTag,{value:"Module"})),Ue="users",Oe="notes",Me="categories",Te="events",Ce="figures",Le="school",ke="videos",Ve="escuela-videos",Fe="eventos-videos",ze=(e="figuras")=>{switch(e){case"escuela":return Ve;case"eventos":return Fe;default:return ke}},Be=(e,t="figuras")=>{const r=ze(t);return U(_e,r,e,"comments")},qe=(e,t,r)=>c(void 0,[e,t,r],function*(e,t,{text:r,userId:s,userDisplayName:i,userPhotoURL:o}){try{if(!e||!r||!s)throw new Error("Datos de comentario incompletos");const n=Be(e,t);return{success:!0,id:(yield W(n,{text:r.slice(0,500),userId:s,userDisplayName:i||"Usuario",userPhotoURL:o||null,status:"active",likes:0,likedBy:[],createdAt:k(),editedAt:null})).id,error:null}}catch(n){return{success:!1,id:null,error:n.message}}}),We=(e,t,r,s=50)=>{try{const i=Be(e,t),o=D(i,M("createdAt","desc"),F(s));return T(o,e=>{const t=e.docs.map(e=>a({id:e.id},e.data()));r(t)})}catch(i){return()=>{}}},Ge=(e,t,r,s,i=!1)=>c(void 0,null,function*(){try{const o=C(Be(e,t),r),n=yield V(o);if(!n.exists())throw new Error("Comentario no encontrado");const a=n.data();if(!i&&a.userId!==s)throw new Error("No autorizado para eliminar este comentario");return yield L(o,{status:"deleted",editedAt:k()}),{success:!0}}catch(o){return{success:!1,error:o.message}}}),$e=(e,t,r,s)=>c(void 0,null,function*(){try{const i=C(Be(e,t),r),o=yield V(i);if(!o.exists())throw new Error("Comentario no encontrado");const n=o.data(),a=Array.isArray(n.likedBy)?n.likedBy:[],l=a.indexOf(s);let c,d;return-1===l?(c=[...a,s],d=(n.likes||0)+1):(c=a.filter(e=>e!==s),d=Math.max((n.likes||0)-1,0)),yield L(i,{likedBy:c,likes:d,editedAt:k()}),{success:!0,likes:d,userLiked:-1===l}}catch(i){return{success:!1,error:i.message}}}),He=(e,t)=>c(void 0,null,function*(){try{return yield G(C(_e,Ue,e),l(a({uid:e},t),{createdAt:k(),updatedAt:k()})),{success:!0,error:null}}catch(r){return{success:!1,error:r.message}}}),Ke=e=>c(void 0,null,function*(){try{const t=C(_e,Ue,e),r=yield V(t);if(r.exists()){return{user:a({id:r.id},r.data()),error:null}}return{user:null,error:"Usuario no encontrado"}}catch(t){return{user:null,error:t.message}}}),Je=(e,t)=>c(void 0,null,function*(){try{const r=C(_e,Ue,e);return yield L(r,l(a({},t),{updatedAt:k()})),{success:!0,error:null}}catch(r){return{success:!1,error:r.message}}}),Ye=e=>c(void 0,null,function*(){try{const t=tt(),r=new Date;r.setDate(r.getDate()+e.expiresInDays);const s={code:t,email:e.email,displayName:e.displayName,username:e.username,role:e.role,createdBy:e.createdBy,createdAt:k(),expiresAt:r,status:"pending",usedAt:null,usedBy:null};return yield G(C(_e,"invitations",t),s),{success:!0,invitationCode:t,invitation:s}}catch(t){return{success:!1,error:t.message}}}),Qe=e=>c(void 0,null,function*(){try{const t=C(_e,"invitations",e),r=yield V(t);if(!r.exists())return{success:!1,error:"Invitación no encontrada"};const s=r.data();return"used"===s.status?{success:!1,error:"Esta invitación ya ha sido utilizada"}:s.expiresAt&&s.expiresAt.toDate()<new Date?{success:!1,error:"Esta invitación ha expirado"}:{success:!0,invitation:s}}catch(t){return{success:!1,error:t.message}}}),Xe=(e,t)=>c(void 0,null,function*(){try{const r=C(_e,"invitations",e);return yield L(r,{status:"used",usedAt:k(),usedBy:t}),{success:!0}}catch(r){return{success:!1,error:r.message}}}),Ze=e=>c(void 0,null,function*(){try{const t=U(_e,"invitations"),r=D(t,O("createdBy","==",e),M("createdAt","desc")),s=yield z(r),i=[];return s.forEach(e=>{i.push(a({id:e.id},e.data()))}),{success:!0,invitations:i}}catch(t){return{success:!1,error:t.message}}}),et=e=>c(void 0,null,function*(){try{return yield q(C(_e,"invitations",e)),{success:!0}}catch(t){return{success:!1,error:t.message}}}),tt=()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t="";for(let r=0;r<8;r++)t+=e.charAt(Math.floor(36*Math.random()));return t},rt=(e,t="figuras")=>c(void 0,null,function*(){try{const r=ze(t),s=C(U(_e,r));return yield G(s,l(a({},e),{id:s.id,createdAt:k(),updatedAt:k()})),{success:!0,id:s.id,error:null}}catch(r){return{success:!1,error:r.message}}}),st=(e,t,r="figuras")=>c(void 0,null,function*(){try{const s=ze(r),i=C(_e,s,e);return yield L(i,l(a({},t),{updatedAt:k()})),{success:!0,error:null}}catch(s){return{success:!1,error:s.message}}}),it=(e,t,r="figuras")=>c(void 0,null,function*(){try{const i=ze(r),o=C(_e,i,e),n=yield V(o);if(!n.exists())throw new Error("Video no encontrado");const a=n.data(),l=a.likedBy||[],c=a.likes||0,d=l.indexOf(t);let u,m;-1===d?(u=[...l,t],m=c+1):(u=l.filter(e=>e!==t),m=c-1),yield L(o,{likes:m,likedBy:u,updatedAt:k()});let g=null;try{g=yield nt(e,t)}catch(s){}return{success:!0,likes:m,likedBy:u,userLiked:-1===d,isFavorite:(null==g?void 0:g.isFavorite)||!1,error:null}}catch(i){return{success:!1,error:i.message}}}),ot=(e,t)=>c(void 0,null,function*(){try{const r=C(_e,ke,e),s=yield V(r);if(!s.exists())return{userLiked:!1,error:"Video no encontrado"};const i=s.data().likedBy||[];return{userLiked:i.includes(t),error:null}}catch(r){return{userLiked:!1,error:r.message}}}),nt=(e,t)=>c(void 0,null,function*(){try{const r=C(_e,Ue,t),s=yield V(r);if(!s.exists())throw new Error("Usuario no encontrado");const i=s.data().favorites||[],o=i.indexOf(e);let n;return n=-1===o?[...i,e]:i.filter(t=>t!==e),yield L(r,{favorites:n,updatedAt:k()}),{success:!0,favorites:n,isFavorite:-1===o,error:null}}catch(r){return{success:!1,error:r.message}}}),at=(e,t)=>c(void 0,null,function*(){try{const r=C(_e,Ue,t),s=yield V(r);if(!s.exists())return{isFavorite:!1,error:"Usuario no encontrado"};const i=s.data().favorites||[];return{isFavorite:i.includes(e),error:null}}catch(r){return{isFavorite:!1,error:r.message}}}),lt=(e,t="figuras")=>c(void 0,null,function*(){try{const r=ze(t),s=C(_e,r,e);return yield q(s),{success:!0,error:null}}catch(r){return{success:!1,error:r.message}}}),ct=(e,t="figuras")=>c(void 0,null,function*(){try{const r=D(U(_e,"escuela"===t?"escuela-videos":"figuras-videos"),O("originalTitle","==",e)),s=yield z(r);return{isDuplicate:!s.empty,error:null}}catch(r){return{isDuplicate:!1,error:r.message}}}),dt=()=>c(void 0,null,function*(){try{const e=D(U(_e,ke),M("createdAt","desc")),t=yield z(e),r=[];return t.forEach(e=>{r.push(a({id:e.id},e.data()))}),r}catch(e){return[]}}),ut=(e,t,r="figuras")=>{try{const s=ze(r),i=D(U(_e,s),O("style","==",e),M("createdAt","desc"));return T(i,e=>{const r=[];e.forEach(e=>{r.push(a({id:e.id},e.data()))}),t(r)},r=>{if("failed-precondition"===r.code||r.message.includes("index")){const r=D(U(_e,s),M("createdAt","desc"));return T(r,r=>{const s=[];r.forEach(e=>{s.push(a({id:e.id},e.data()))});const i=s.filter(t=>t.style===e);t(i)},e=>{})}})}catch(s){return()=>{}}},mt=()=>c(void 0,null,function*(){try{const e=yield dt();if(0===e.length)return{success:!0,deletedCount:0,error:null};const t=B(_e);let r=0;return e.forEach(e=>{const s=C(_e,ke,e.id);t.delete(s),r++}),yield t.commit(),{success:!0,deletedCount:r,error:null}}catch(e){return{success:!1,deletedCount:0,error:e.message}}}),gt=()=>c(void 0,null,function*(){try{const e=yield dt();if(0===e.length)return{success:!0,updatedCount:0,error:null};const t=B(_e);let r=0;return e.forEach(e=>{if(!e.thumbnailPath||"placeholder"===e.thumbnailPath){const s=C(_e,ke,e.id);t.update(s,{thumbnailPath:null,updatedAt:k()}),r++}}),r>0&&(yield t.commit()),{success:!0,updatedCount:r,error:null}}catch(e){return{success:!1,updatedCount:0,error:e.message}}}),ht=()=>c(void 0,null,function*(){try{const e=yield dt(),t={};e.forEach(e=>{const r=e.style||"sin-estilo";t[r]||(t[r]=[]),t[r].push(e)});const r=e.filter(e=>"salsa"===e.style||e.tags&&e.tags.estilo&&e.tags.estilo.includes("salsa"));r.forEach(e=>{});const s=e.find(e=>e.originalTitle&&e.originalTitle.includes("Fig003")),i=e.filter(e=>!e.resolution||"Unknown"===e.resolution);return i.forEach(e=>{}),{success:!0,totalVideos:e.length,videosByStyle:t,salsaVideos:r.length,fig003Found:!!s,fig003Video:s,videosWithoutResolution:i.length,error:null}}catch(e){return{success:!1,totalVideos:0,videosByStyle:{},salsaVideos:0,fig003Found:!1,fig003Video:null,videosWithoutResolution:0,error:e.message}}}),ft=()=>c(void 0,null,function*(){try{const e=yield dt();if(0===e.length)return{success:!0,updatedCount:0,error:null};const t=B(_e);let r=0;return e.forEach(e=>{let s=!1;const i={},o={},n={};if(e.tags&&Object.keys(e.tags).forEach(t=>{if(Array.isArray(e.tags[t])){const r=[...new Set(e.tags[t])];r.length!==e.tags[t].length&&(i[t]=r,s=!0)}}),e.tagsIniciales&&Object.keys(e.tagsIniciales).forEach(t=>{if(Array.isArray(e.tagsIniciales[t])){const r=[...new Set(e.tagsIniciales[t])];r.length!==e.tagsIniciales[t].length&&(o[t]=r,s=!0)}}),e.tagsFinales&&Object.keys(e.tagsFinales).forEach(t=>{if(Array.isArray(e.tagsFinales[t])){const r=[...new Set(e.tagsFinales[t])];r.length!==e.tagsFinales[t].length&&(n[t]=r,s=!0)}}),s){const s=C(_e,ke,e.id),l={updatedAt:k()};Object.keys(i).length>0&&(l.tags=a(a({},e.tags),i)),Object.keys(o).length>0&&(l.tagsIniciales=a(a({},e.tagsIniciales),o)),Object.keys(n).length>0&&(l.tagsFinales=a(a({},e.tagsFinales),n)),t.update(s,l),r++}}),r>0&&(yield t.commit()),{success:!0,updatedCount:r,error:null}}catch(e){return{success:!1,updatedCount:0,error:e.message}}}),pt=Object.freeze(Object.defineProperty({__proto__:null,checkUserFavorite:at,checkUserLikedVideo:ot,checkVideoDuplicate:ct,cleanupDuplicateTags:ft,createEvent:e=>c(void 0,null,function*(){try{return{id:(yield W(U(_e,Te),l(a({},e),{createdAt:k(),updatedAt:k()}))).id,error:null}}catch(t){return{id:null,error:t.message}}}),createFigure:e=>c(void 0,null,function*(){try{return{id:(yield W(U(_e,Ce),l(a({},e),{createdAt:k(),updatedAt:k()}))).id,error:null}}catch(t){return{id:null,error:t.message}}}),createInvitation:Ye,createNote:e=>c(void 0,null,function*(){try{return{id:(yield W(U(_e,Oe),l(a({},e),{createdAt:k(),updatedAt:k()}))).id,error:null}}catch(t){return{id:null,error:t.message}}}),createSchoolContent:e=>c(void 0,null,function*(){try{return{id:(yield W(U(_e,Le),l(a({},e),{createdAt:k(),updatedAt:k()}))).id,error:null}}catch(t){return{id:null,error:t.message}}}),createUserProfile:He,createVideoComment:qe,createVideoDocument:rt,deleteAllVideos:mt,deleteInvitation:et,deleteNote:e=>c(void 0,null,function*(){try{return yield q(C(_e,Oe,e)),{success:!0,error:null}}catch(t){return{success:!1,error:t.message}}}),deleteVideoDocument:lt,diagnoseVideos:ht,getCategories:()=>c(void 0,null,function*(){try{const e=yield z(U(_e,Me));return{categories:e.docs.map(e=>a({id:e.id},e.data())),error:null}}catch(e){return{categories:[],error:e.message}}}),getEvents:()=>c(void 0,null,function*(){try{const e=D(U(_e,Te),M("date","asc")),t=yield z(e);return{events:t.docs.map(e=>a({id:e.id},e.data())),error:null}}catch(e){return{events:[],error:e.message}}}),getFigures:()=>c(void 0,null,function*(){try{const e=yield z(U(_e,Ce));return{figures:e.docs.map(e=>a({id:e.id},e.data())),error:null}}catch(e){return{figures:[],error:e.message}}}),getNotes:e=>c(void 0,null,function*(){try{const t=D(U(_e,Oe),O("userId","==",e),M("createdAt","desc")),r=yield z(t);return{notes:r.docs.map(e=>a({id:e.id},e.data())),error:null}}catch(t){return{notes:[],error:t.message}}}),getSchoolContent:()=>c(void 0,null,function*(){try{const e=D(U(_e,Le),M("createdAt","desc")),t=yield z(e);return{content:t.docs.map(e=>a({id:e.id},e.data())),error:null}}catch(e){return{content:[],error:e.message}}}),getUserFavorites:e=>c(void 0,null,function*(){try{const r=C(_e,Ue,e),s=yield V(r);if(!s.exists())return{favorites:[],error:"Usuario no encontrado"};const i=s.data().favorites||[];if(0===i.length)return{favorites:[],error:null};const o=[];for(const e of i)try{const t=C(_e,ke,e),r=yield V(t);r.exists()&&o.push(a({id:r.id},r.data()))}catch(t){}return{favorites:o,error:null}}catch(t){return{favorites:[],error:t.message}}}),getUserInvitations:Ze,getUserProfile:Ke,getVideoDocument:e=>c(void 0,null,function*(){try{const t=C(_e,ke,e),r=yield V(t);if(r.exists()){return{video:a({id:r.id},r.data()),error:null}}return{video:null,error:"Video no encontrado"}}catch(t){return{video:null,error:t.message}}}),getVideos:dt,getVideosByCategory:e=>c(void 0,null,function*(){try{const t=D(U(_e,ke),O("category","==",e),M("createdAt","desc")),r=yield z(t),s=[];return r.forEach(e=>{s.push(a({id:e.id},e.data()))}),{videos:s,error:null}}catch(t){return{videos:[],error:t.message}}}),getVideosByUser:e=>c(void 0,null,function*(){try{const t=D(U(_e,ke),O("uploadedBy","==",e),M("createdAt","desc")),r=yield z(t),s=[];return r.forEach(e=>{s.push(a({id:e.id},e.data()))}),{videos:s,error:null}}catch(t){return{videos:[],error:t.message}}}),markInvitationAsUsed:Xe,softDeleteVideoComment:Ge,subscribeToEvents:e=>{const t=D(U(_e,Te),M("date","asc"));return T(t,t=>{const r=t.docs.map(e=>a({id:e.id},e.data()));e(r)})},subscribeToNotes:(e,t)=>{const r=D(U(_e,Oe),O("userId","==",e),M("createdAt","desc"));return T(r,e=>{const r=e.docs.map(e=>a({id:e.id},e.data()));t(r)})},subscribeToVideoComments:We,subscribeToVideos:e=>{try{const t=D(U(_e,ke),M("createdAt","desc"));return T(t,t=>{const r=[];t.forEach(e=>{r.push(a({id:e.id},e.data()))}),e(r)},e=>{})}catch(t){return()=>{}}},subscribeToVideosByStyle:ut,toggleLikeVideoComment:$e,toggleUserFavorite:nt,toggleVideoLike:it,updateNote:(e,t)=>c(void 0,null,function*(){try{const r=C(_e,Oe,e);return yield L(r,l(a({},t),{updatedAt:k()})),{success:!0,error:null}}catch(r){return{success:!1,error:r.message}}}),updateUserProfile:Je,updateVideoDocument:st,updateVideoThumbnailPaths:gt,validateInvitation:Qe},Symbol.toStringTag,{value:"Module"})),yt={SUPER_ADMIN:"super_admin",MAESE:"maese",USER:"user",POLLITO:"pollito"},vt={[yt.SUPER_ADMIN]:"Super Administrador",[yt.MAESE]:"Maese",[yt.USER]:"Soldado",[yt.POLLITO]:"Pollito"},Et={[yt.SUPER_ADMIN]:"bg-purple-600 text-white",[yt.MAESE]:"bg-red-500 text-white",[yt.USER]:"bg-green-500 text-white",[yt.POLLITO]:"bg-yellow-400 text-gray-800"},xt={MANAGE_USERS:[yt.SUPER_ADMIN,yt.MAESE],VIEW_USERS:[yt.SUPER_ADMIN,yt.MAESE],CREATE_CONTENT:[yt.SUPER_ADMIN,yt.MAESE],EDIT_CONTENT:[yt.SUPER_ADMIN,yt.MAESE],DELETE_CONTENT:[yt.SUPER_ADMIN],PUBLISH_CONTENT:[yt.SUPER_ADMIN,yt.MAESE],CREATE_EVENTS:[yt.SUPER_ADMIN,yt.MAESE],EDIT_EVENTS:[yt.SUPER_ADMIN,yt.MAESE],DELETE_EVENTS:[yt.SUPER_ADMIN],MANAGE_EVENTS:[yt.SUPER_ADMIN,yt.MAESE],CREATE_FIGURES:[yt.SUPER_ADMIN,yt.MAESE],EDIT_FIGURES:[yt.SUPER_ADMIN,yt.MAESE],DELETE_FIGURES:[yt.SUPER_ADMIN],CREATE_LESSONS:[yt.SUPER_ADMIN,yt.MAESE],EDIT_LESSONS:[yt.SUPER_ADMIN,yt.MAESE],DELETE_LESSONS:[yt.SUPER_ADMIN],ACCESS_PREMIUM_CONTENT:[yt.SUPER_ADMIN,yt.MAESE,yt.USER],ACCESS_BASIC_CONTENT:[yt.SUPER_ADMIN,yt.MAESE,yt.USER,yt.POLLITO],ACCESS_PUBLIC_CONTENT:[yt.SUPER_ADMIN,yt.MAESE,yt.USER,yt.POLLITO],MANAGE_SYSTEM:[yt.SUPER_ADMIN],VIEW_ANALYTICS:[yt.SUPER_ADMIN,yt.MAESE],MANAGE_CATEGORIES:[yt.SUPER_ADMIN,yt.MAESE],UPLOAD_VIDEOS:[yt.SUPER_ADMIN,yt.MAESE],DOWNLOAD_VIDEOS:[yt.SUPER_ADMIN,yt.MAESE],UPLOAD_IMAGES:[yt.SUPER_ADMIN,yt.MAESE,yt.USER],COMMENT_CONTENT:[yt.SUPER_ADMIN,yt.MAESE,yt.USER],RATE_CONTENT:[yt.SUPER_ADMIN,yt.MAESE,yt.USER],SEND_NOTIFICATIONS:[yt.SUPER_ADMIN,yt.MAESE],RECEIVE_NOTIFICATIONS:[yt.SUPER_ADMIN,yt.MAESE,yt.USER]},St=e=>e?Object.keys(xt).filter(t=>xt[t].includes(e)):[],_t={"/":[yt.SUPER_ADMIN,yt.MAESE,yt.USER,yt.POLLITO],"/figuras":[yt.SUPER_ADMIN,yt.MAESE,yt.USER,yt.POLLITO],"/escuela":[yt.SUPER_ADMIN,yt.MAESE,yt.USER,yt.POLLITO],"/eventos":[yt.SUPER_ADMIN,yt.MAESE,yt.USER,yt.POLLITO],"/categorias":[yt.SUPER_ADMIN,yt.MAESE,yt.USER,yt.POLLITO],"/notas":[yt.SUPER_ADMIN],"/admin":[yt.SUPER_ADMIN,yt.MAESE],"/auth":[yt.SUPER_ADMIN,yt.MAESE,yt.USER,yt.POLLITO]},At={PRODUCTION_URL:"https://salsahacks-a9cac.web.app",isProduction:!0,getBaseUrl:()=>At.PRODUCTION_URL,getInvitationUrl:e=>`${At.getBaseUrl()}/invite/${e}`},bt=d.createContext(),jt=()=>{const e=d.useContext(bt);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Nt=({children:e})=>{const[t,r]=d.useState(null),[s,i]=d.useState(null),[o,n]=d.useState(!0),u=e=>c(void 0,null,function*(){if("david_exile_92@hotmail.com"===e.email)try{const t={displayName:"David",email:e.email,role:yt.SUPER_ADMIN,username:"david",createdAt:new Date,permissions:St(yt.SUPER_ADMIN),photoURL:e.photoURL||null,isSuperAdmin:!0};if((yield He(e.uid,t)).success)return t}catch(t){}return null});d.useEffect(()=>{const e=Re(e=>c(void 0,null,function*(){if(e){r(e);try{const{user:t}=yield Ke(e.uid);if(t){const e=yield(e=>c(void 0,null,function*(){if("david_exile_92@hotmail.com"===(null==e?void 0:e.email)&&(null==e?void 0:e.role)!==yt.SUPER_ADMIN)try{return yield Je(e.uid,{role:yt.SUPER_ADMIN,permissions:St(yt.SUPER_ADMIN),updatedAt:new Date}),l(a({},e),{role:yt.SUPER_ADMIN,permissions:St(yt.SUPER_ADMIN)})}catch(t){}else null==e||e.email;return e}))(t);i(e)}else if("david_exile_92@hotmail.com"===e.email){const t=yield u(e);t&&i(t)}}catch(t){if("david_exile_92@hotmail.com"===e.email){const t=yield u(e);t&&i(t)}}}else r(null),i(null);n(!1)}));return()=>e()},[]);const m=e=>c(void 0,null,function*(){try{return yield Qe(e)}catch(t){return{success:!1,error:t.message}}}),g={user:t,userProfile:s,loading:o,login:(e,t)=>c(void 0,null,function*(){try{const{user:r,error:s}=yield Ne(e,t);if(s)throw new Error(s);return{success:!0,error:null}}catch(r){return{success:!1,error:r.message}}}),loginWithGoogle:()=>c(void 0,null,function*(){try{const{user:e,error:t}=yield Pe();if(t)throw new Error(t);return{success:!0,error:null}}catch(e){return{success:!1,error:e.message}}}),createInvitation:(e,t,r,i,o=7)=>c(void 0,null,function*(){try{if(!s||s.role!==yt.SUPER_ADMIN)throw new Error("Solo el Super Administrador puede crear invitaciones");const n=yield Ye({email:e,displayName:t,role:r,username:i,expiresInDays:o,createdBy:s.uid,createdAt:new Date});if(n.success){const e=At.getInvitationUrl(n.invitationCode);return{success:!0,invitationCode:n.invitationCode,invitationUrl:e,error:null}}return{success:!1,error:n.error}}catch(n){return{success:!1,error:n.message}}}),validateInvitation:m,createUserByInvitation:(e,t)=>c(void 0,null,function*(){try{const r=yield m(e);if(!r.success)throw new Error(r.error);const s=r.invitation,{user:o,error:n}=yield je(s.email,t,s.displayName);if(n)throw new Error(n);if(o){const t={displayName:s.displayName,email:s.email,role:s.role,username:s.username,createdAt:new Date,permissions:St(s.role),photoURL:o.photoURL||null,invitedBy:s.createdBy,invitationCode:e,invitationDate:new Date},r=yield He(o.uid,t);if(!r.success)throw new Error(r.error);(yield Xe(e,o.uid)).success;const{user:n}=yield Ke(o.uid);n&&i(n)}return{success:!0,error:null}}catch(r){return{success:!1,error:r.message}}}),logout:()=>c(void 0,null,function*(){try{return yield Ie(),{success:!0,error:null}}catch(e){return{success:!1,error:e.message}}}),resetPassword:e=>c(void 0,null,function*(){try{const{error:t}=yield we(e);if(t)throw new Error(t);return{success:!0,error:null}}catch(t){return{success:!1,error:t.message}}}),updateUserProfile:e=>c(void 0,null,function*(){var r;try{if(!(null==t?void 0:t.uid))throw new Error("Usuario no autenticado");const s=l(a({},e),{username:e.username||(null==(r=e.displayName)?void 0:r.toLowerCase().replace(/\s+/g,"")),updatedAt:new Date});return yield Je(t.uid,s),i(e=>a(a({},e),s)),{success:!0,error:null}}catch(s){return{success:!1,error:s.message}}}),getUserUsername:()=>{var e;return(null==s?void 0:s.username)||(null==(e=null==s?void 0:s.displayName)?void 0:e.toLowerCase().replace(/\s+/g,""))||"usuario"},getUserPhoto:()=>(null==s?void 0:s.photoURL)||(null==t?void 0:t.photoURL)||null,isAuthenticated:!!t,isSuperAdmin:(null==s?void 0:s.role)===yt.SUPER_ADMIN,isMaese:(null==s?void 0:s.role)===yt.MAESE,isUser:(null==s?void 0:s.role)===yt.USER,isPollito:(null==s?void 0:s.role)===yt.POLLITO,hasPermission:e=>((e,t)=>!(!e||!xt[t])&&xt[t].includes(e))(null==s?void 0:s.role,e),hasPageAccess:e=>((e,t)=>!(!e||!_t[t])&&_t[t].includes(e))(null==s?void 0:s.role,e),getRolePermissions:()=>St(null==s?void 0:s.role),forceUpdateDavidRole:()=>c(void 0,null,function*(){if(!(null==t?void 0:t.uid))return{success:!1,error:"No hay usuario autenticado"};if("david_exile_92@hotmail.com"!==t.email)return{success:!1,error:"Solo David puede usar esta función"};try{const{user:e}=yield Ke(t.uid);if(e)yield Je(t.uid,{role:yt.SUPER_ADMIN,permissions:St(yt.SUPER_ADMIN),updatedAt:new Date,isSuperAdmin:!0});else{yield u(t)}const{user:r}=yield Ke(t.uid);return r&&i(r),{success:!0,error:null}}catch(e){return{success:!1,error:e.message}}})};return ue.jsx(bt.Provider,{value:g,children:e})},Pt=d.createContext(),It=()=>{const e=d.useContext(Pt);if(!e)throw new Error("useSequenceBuilderContext debe usarse dentro de un SequenceBuilderProvider");return e},wt=({children:e})=>{const[t,r]=d.useState([]),[s,i]=d.useState(""),[o,n]=d.useState(""),[a,l]=d.useState(!1),[c,u]=d.useState(!1),[m,g]=d.useState(null),h=d.useCallback(e=>{if(!e)return[];const t=[];return Array.isArray(e)?e:(Object.values(e).forEach(e=>{Array.isArray(e)&&t.push(...e)}),t)},[]),f=d.useCallback((e,t)=>{if(!e||!t)return!1;const r=h(e.tagsFinales),s=h(t.tagsIniciales);return r.some(e=>s.some(t=>{const r=e===t;return r}))},[h]),p=d.useCallback(e=>{r(t=>[...t,e])},[]),y=d.useCallback(e=>{r(t=>t.filter((t,r)=>r!==e))},[]),v=d.useCallback((e,t)=>{r(r=>{const s=[...r],[i]=s.splice(e,1);return s.splice(t,0,i),s})},[]),E=d.useCallback((e,s=5)=>{if(0===e.length)return;const i=[...t];let o=[...e];if(o=o.filter(e=>!i.some(t=>t.id===e.id)),0===i.length){const e=Math.floor(Math.random()*o.length),t=o[e];i.push(t),o.splice(e,1)}const n=s-i.length;for(let t=0;t<n&&o.length>0;t++){const e=i[i.length-1],t=o.filter(t=>f(e,t));if(0===t.length)break;{const e=t[Math.floor(Math.random()*t.length)];i.push(e),o=o.filter(t=>t.id!==e.id)}}r(i)},[t,f]),x=d.useCallback(()=>{r([]),i(""),n(""),g(null)},[]),S=d.useCallback(()=>{l(e=>!e)},[]),_=d.useCallback(()=>{l(!0)},[]),A=d.useCallback(()=>{l(!1),x()},[x]),b=d.useCallback(e=>{r(e.videos||[]),i(e.name||""),n(e.description||""),g(e.id||null),l(!0)},[]),j=d.useCallback(()=>{u(e=>!e)},[]),N=d.useCallback(e=>{if(0===t.length)return!0;const r=t[t.length-1];return f(r,e)},[t,f]),P=d.useCallback(e=>{if(0===t.length)return e;const r=t[t.length-1];return e.filter(e=>f(r,e))},[t,f]),I=d.useCallback(e=>c?e:P(e),[c,P]),w=d.useCallback(e=>!1,[t]),R={sequence:t,sequenceName:s,sequenceDescription:o,isBuilderOpen:a,showAllVideos:c,editingSequenceId:m,setSequenceName:i,setSequenceDescription:n,addVideoToSequence:p,removeVideoFromSequence:y,reorderSequence:v,generateRandomSequence:E,clearSequence:x,openBuilder:_,closeBuilder:A,toggleBuilder:S,loadSequence:b,toggleShowAllVideos:j,checkCompatibility:f,isVideoCompatible:N,isVideoInSequence:w,getCompatibleVideos:P,getFilteredVideos:I};return ue.jsx(Pt.Provider,{value:R,children:e})},Rt=d.createContext(),Dt=()=>{const e=d.useContext(Rt);if(!e)throw new Error("useCardSize debe ser usado dentro de un CardSizeProvider");return e},Ut=({children:e})=>{const[t,r]=d.useState("large"),[s,i]=d.useState("large"),o={small:{grid:"md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6",gridFullWidth:"md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 2xl:grid-cols-10",aspect:"aspect-video",imageObject:"object-cover",thumbnailSize:"thumbnail-small",titleSize:"text-xs",descriptionLines:1,showStats:!1,showTags:!0,compact:!0,maxTags:2},medium:{grid:"md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5",gridFullWidth:"md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-7",aspect:"aspect-video",imageObject:"object-cover",thumbnailSize:"thumbnail-medium",titleSize:"text-sm",descriptionLines:1,showStats:!1,showTags:!0,compact:!0,maxTags:3},large:{grid:"md:grid-cols-2 lg:grid-cols-3",gridFullWidth:"md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5",aspect:"aspect-video",imageObject:"object-cover",thumbnailSize:"thumbnail-large",titleSize:"text-xl",descriptionLines:3,showStats:!0,showTags:!0,compact:!1,maxTags:5},"extra-large":{grid:"md:grid-cols-1 lg:grid-cols-2",gridFullWidth:"md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",aspect:"aspect-video",imageObject:"object-cover",thumbnailSize:"thumbnail-extra-large",titleSize:"text-2xl",descriptionLines:4,showStats:!0,showTags:!0,compact:!1,maxTags:8}},n={small:{grid:"md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6",gridFullWidth:"md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 2xl:grid-cols-10",aspect:"aspect-video",imageObject:"object-cover",thumbnailSize:"thumbnail-small",titleSize:"text-xs",descriptionLines:0,showStats:!0,showTags:!0,showIcons:!0,compact:!0},medium:{grid:"md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5",gridFullWidth:"md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-7",aspect:"aspect-video",imageObject:"object-cover",thumbnailSize:"thumbnail-medium",titleSize:"text-sm",descriptionLines:0,showStats:!0,showTags:!0,showIcons:!0,compact:!0},large:{grid:"md:grid-cols-2 lg:grid-cols-3",gridFullWidth:"md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5",aspect:"aspect-video",imageObject:"object-cover",thumbnailSize:"thumbnail-large",titleSize:"text-lg",descriptionLines:2,showStats:!0,showTags:!0,showIcons:!1,compact:!1},"extra-large":{grid:"md:grid-cols-1 lg:grid-cols-2",gridFullWidth:"md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",aspect:"aspect-video",imageObject:"object-cover",thumbnailSize:"thumbnail-extra-large",titleSize:"text-xl",descriptionLines:3,showStats:!0,showTags:!0,showIcons:!1,compact:!1}},c={videoCardSize:t,sequenceCardSize:s,setVideoCardSize:r,setSequenceCardSize:i,videoSizeConfig:o,sequenceSizeConfig:n,getVideoConfig:(e=!1)=>{const r=o[t];return l(a({},r),{grid:e?r.gridFullWidth:r.grid})},getSequenceConfig:(e=!1)=>{const t=n[s];return l(a({},t),{grid:e?t.gridFullWidth:t.grid})},availableSizes:["small","medium","large","extra-large"],sizeLabels:{small:"Pequeño",medium:"Mediano",large:"Grande","extra-large":"Extra Grande"}};return ue.jsx(Rt.Provider,{value:c,children:e})},Ot=()=>{const e=g(),{theme:t,changeTheme:r}=ve(),{user:s,userProfile:i,isAuthenticated:o,logout:n,hasPermission:a,getUserUsername:l,getUserPhoto:u}=jt(),[m,f]=d.useState(!1),p=[{path:"/",label:"Inicio"},...s?[{path:"/figuras",label:"Figuras"},{path:"/escuela",label:"Escuela"},{path:"/eventos",label:"Eventos"},{path:"/categorias",label:"Categorías"},...(null==i?void 0:i.role)===yt.SUPER_ADMIN?[{path:"/notas",label:"Notas"}]:[]]:[]];a("MANAGE_USERS")&&p.push({path:"/admin",label:"Admin"});return ue.jsxs("nav",{className:"bg-white shadow-lg border-b-2 border-salsa-primary",children:[ue.jsx("div",{className:"container mx-auto px-4",children:ue.jsxs("div",{className:"flex justify-between items-center h-16",children:[ue.jsxs(h,{to:"/",className:"flex items-center space-x-2",children:[ue.jsx($,{className:"h-8 w-8 text-salsa-primary"}),ue.jsx("span",{className:"text-2xl font-bold text-salsa-primary",children:"SalsaHacks"})]}),ue.jsx("div",{className:"hidden md:flex space-x-8",children:p.map(t=>ue.jsx(h,{to:t.path,className:"px-3 py-2 rounded-md text-sm font-medium transition-colors "+(e.pathname===t.path?"text-salsa-primary bg-salsa-light":"text-gray-700 hover:text-salsa-primary hover:bg-salsa-light"),children:t.label},t.path))}),ue.jsx("button",{className:"md:hidden p-2 text-gray-600 hover:text-salsa-primary transition-colors",onClick:()=>f(e=>!e),"aria-label":m?"Cerrar navegación":"Abrir navegación",children:ue.jsx(H,{className:"h-6 w-6"})}),ue.jsxs("div",{className:"flex items-center space-x-4",children:[ue.jsx("button",{className:"p-2 text-gray-600 hover:text-salsa-primary transition-colors",children:ue.jsx(K,{className:"h-5 w-5"})}),ue.jsx("button",{onClick:()=>{const e=["light","dark","salsa"],s=(e.indexOf(t)+1)%e.length;r(e[s])},className:"p-2 text-gray-600 hover:text-salsa-primary transition-colors",children:"dark"===t?ue.jsx(J,{className:"h-5 w-5"}):ue.jsx(Y,{className:"h-5 w-5"})}),ue.jsxs("button",{className:"p-2 text-gray-600 hover:text-salsa-primary transition-colors relative",children:[ue.jsx(Q,{className:"h-5 w-5"}),ue.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:"3"})]}),ue.jsx("button",{className:"p-2 text-gray-600 hover:text-salsa-primary transition-colors",children:ue.jsx(X,{className:"h-5 w-5"})}),o?ue.jsxs("div",{className:"relative group",children:[ue.jsxs("button",{className:"flex items-center space-x-3 p-2 text-gray-600 hover:text-salsa-primary transition-colors rounded-lg hover:bg-gray-100",children:[ue.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-pink-500 to-orange-500 rounded-full flex items-center justify-center",children:u()?ue.jsx("img",{src:u(),alt:"Foto de perfil",className:"w-8 h-8 rounded-full object-cover"}):ue.jsx(Z,{className:"h-4 w-4 text-white"})}),ue.jsxs("div",{className:"flex flex-col items-start",children:[ue.jsx("span",{className:"text-sm font-medium text-gray-700",children:l()}),(null==i?void 0:i.role)&&ue.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${Et[i.role]||"bg-gray-500 text-white"}`,children:[ue.jsx(ee,{className:"h-3 w-3 mr-1"}),vt[i.role]||i.role]})]})]}),ue.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:ue.jsxs("div",{className:"py-2",children:[ue.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:ue.jsxs("div",{className:"flex items-center space-x-3",children:[ue.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-pink-500 to-orange-500 rounded-full flex items-center justify-center",children:u()?ue.jsx("img",{src:u(),alt:"Foto de perfil",className:"w-10 h-10 rounded-full object-cover"}):ue.jsx(Z,{className:"h-5 w-5 text-white"})}),ue.jsxs("div",{className:"flex-1 min-w-0",children:[ue.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:(null==i?void 0:i.displayName)||(null==s?void 0:s.displayName)||"Usuario"}),ue.jsx("p",{className:"text-xs text-gray-500 truncate",children:l()}),(null==i?void 0:i.role)&&ue.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium mt-1 ${Et[i.role]||"bg-gray-500 text-white"}`,children:[ue.jsx(ee,{className:"h-3 w-3 mr-1"}),vt[i.role]||i.role]})]})]})}),ue.jsx(h,{to:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:"Mi Perfil"}),ue.jsx(h,{to:"/settings",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:"Configuración"}),ue.jsx("button",{onClick:()=>c(void 0,null,function*(){try{yield n()}catch(e){}}),className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:"Cerrar Sesión"})]})})]}):ue.jsx(h,{to:"/auth",className:"px-4 py-2 bg-gradient-to-r from-pink-500 to-orange-500 text-white rounded-lg hover:from-pink-600 hover:to-orange-600 transition-all duration-200 font-medium",children:"Iniciar Sesión"})]})]})}),m&&ue.jsx("div",{className:"md:hidden border-t border-gray-100",children:ue.jsx("div",{className:"container mx-auto px-4 py-3",children:ue.jsx("div",{className:"flex space-x-4 overflow-x-auto",children:p.map(t=>ue.jsx(h,{to:t.path,onClick:()=>f(!1),className:"whitespace-nowrap px-3 py-2 rounded-md text-sm font-medium transition-colors "+(e.pathname===t.path?"text-salsa-primary bg-salsa-light":"text-gray-700 hover:text-salsa-primary hover:bg-salsa-light"),children:t.label},t.path))})})})]})},Mt=({size:e="default",className:t=""})=>ue.jsx("div",{className:`flex items-center justify-center min-h-[400px] ${t}`,children:ue.jsx("div",{className:`animate-spin rounded-full border-b-2 border-pink-500 ${{small:"h-6 w-6",default:"h-12 w-12",large:"h-16 w-16"}[e]}`})}),Tt=({children:e,requiredRole:t=null})=>{const{user:r,userProfile:s,loading:i}=jt(),o=g();return i?ue.jsx(Mt,{}):r?t&&(null==s?void 0:s.role)!==t?ue.jsx(f,{to:"/",replace:!0}):e:ue.jsx(f,{to:"/auth",state:{from:o},replace:!0})},Ct=d.lazy(()=>pe(()=>import("../js/HomePage-BsJ_k2TS.js"),__vite__mapDeps([0,1,2,3,4]))),Lt=d.lazy(()=>pe(()=>import("../js/NotasPage-tt3xnLUf.js"),__vite__mapDeps([5,2,4,3,1]))),kt=d.lazy(()=>pe(()=>import("../js/CategoriesPage-D-ENWaGS.js"),__vite__mapDeps([6,2,3,1,4]))),Vt=d.lazy(()=>pe(()=>import("../js/FigurasPage-DiHenXlL.js"),__vite__mapDeps([7,2,8,3,9,1,4,10,11,12]))),Ft=d.lazy(()=>pe(()=>import("../js/EscuelaPage-CsLMD1u-.js"),__vite__mapDeps([13,2,8,3,9,1,4,10,12]))),zt=d.lazy(()=>pe(()=>import("../js/AdminPage-0Q6SmpB2.js"),__vite__mapDeps([14,2,3,1,4]))),Bt=d.lazy(()=>pe(()=>import("../js/AuthPage-DvgGvUmt.js"),__vite__mapDeps([15,2,3,1,4]))),qt=d.lazy(()=>pe(()=>import("../js/ProfilePage-CFGC2a1A.js"),__vite__mapDeps([16,2,3,1,4]))),Wt=d.lazy(()=>pe(()=>import("../js/SettingsPage-Dg6HaX7M.js"),__vite__mapDeps([17,2,3,1,4]))),Gt=d.lazy(()=>pe(()=>import("../js/InvitePage-LooNV4Wq.js"),__vite__mapDeps([18,2,1,3,4]))),$t=()=>ue.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:ue.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500"})});function Ht(){const e=g(),t="/figuras"===e.pathname,r="/escuela"===e.pathname;return ue.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-salsa-light to-white",children:[ue.jsx(Ot,{}),ue.jsx("main",{className:t||r?"w-full":"container mx-auto px-4 py-8",children:ue.jsx(d.Suspense,{fallback:ue.jsx($t,{}),children:ue.jsxs(y,{children:[ue.jsx(v,{path:"/",element:ue.jsx(Ct,{})}),ue.jsx(v,{path:"/auth",element:ue.jsx(Bt,{})}),ue.jsx(v,{path:"/invite/:invitationCode",element:ue.jsx(Gt,{})}),ue.jsx(v,{path:"/profile",element:ue.jsx(Tt,{children:ue.jsx(qt,{})})}),ue.jsx(v,{path:"/settings",element:ue.jsx(Tt,{children:ue.jsx(Wt,{})})}),ue.jsx(v,{path:"/notas",element:ue.jsx(Tt,{requiredRole:yt.SUPER_ADMIN,children:ue.jsx(Lt,{})})}),ue.jsx(v,{path:"/categorias",element:ue.jsx(Tt,{children:ue.jsx(kt,{})})}),ue.jsx(v,{path:"/figuras",element:ue.jsx(Tt,{children:ue.jsx(Vt,{})})}),ue.jsx(v,{path:"/escuela",element:ue.jsx(Tt,{children:ue.jsx(Ft,{})})})," ",ue.jsx(v,{path:"/admin",element:ue.jsx(Tt,{requiredRole:yt.SUPER_ADMIN,children:ue.jsx(zt,{})})})]})})})]})}function Kt(){return ue.jsx(Ee,{children:ue.jsx(Nt,{children:ue.jsx(wt,{children:ue.jsx(Ut,{children:ue.jsx(p,{children:ue.jsx(Ht,{})})})})})})}const Jt=()=>{const e=new Map;return{getAuth:()=>c(void 0,null,function*(){if(!e.has("auth")){const{getAuth:t}=yield pe(()=>c(void 0,null,function*(){const{getAuth:e}=yield import("../js/vendor-firebase-CCu_Fqhx.js").then(e=>e.I);return{getAuth:e}}),[]);e.set("auth",t)}return e.get("auth")}),getFirestore:()=>c(void 0,null,function*(){if(!e.has("firestore")){const{getFirestore:t}=yield pe(()=>c(void 0,null,function*(){const{getFirestore:e}=yield import("../js/vendor-firebase-CCu_Fqhx.js").then(e=>e.J);return{getFirestore:e}}),[]);e.set("firestore",t)}return e.get("firestore")}),getStorage:()=>c(void 0,null,function*(){if(!e.has("storage")){const{getStorage:t}=yield pe(()=>c(void 0,null,function*(){const{getStorage:e}=yield import("../js/vendor-firebase-CCu_Fqhx.js").then(e=>e.K);return{getStorage:e}}),[]);e.set("storage",t)}return e.get("storage")})}},Yt=()=>{const e=new Map;return{getIcon:t=>c(void 0,null,function*(){if(!e.has(t))try{const{[t]:r}=yield pe(()=>c(void 0,null,function*(){const{[t]:e}=yield import("../js/vendor-icons-BWQzNHDY.js");return{[t]:e}}),__vite__mapDeps([3,2]));e.set(t,r)}catch(r){return null}return e.get(t)})}},Qt=()=>{const e=new Map;return{getVideoService:()=>c(void 0,null,function*(){if(!e.has("video")){const t=yield pe(()=>import("../js/videoCombiner-5iDQDamN.js"),__vite__mapDeps([19,2,1,4,3]));e.set("video",t.default)}return e.get("video")}),getFirebaseService:t=>c(void 0,null,function*(){if(!e.has(t)){const r=yield((e,t,r)=>{const s=e[t];return s?"function"==typeof s?s():Promise.resolve(s):new Promise((e,s)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==r?". Note that variables only represent file names one level deep.":""))))})})(Object.assign({"../services/firebase/auth.js":()=>pe(()=>Promise.resolve().then(()=>De),void 0),"../services/firebase/config.js":()=>pe(()=>Promise.resolve().then(()=>be),void 0),"../services/firebase/firestore.js":()=>pe(()=>Promise.resolve().then(()=>pt),void 0),"../services/firebase/index.js":()=>pe(()=>import("../js/index-CKQjJMH2.js").then(e=>e.i),__vite__mapDeps([12,4])),"../services/firebase/sequences.js":()=>pe(()=>import("../js/sequences-DM4W3PfV.js"),__vite__mapDeps([11,4,2,1,3])),"../services/firebase/storage.js":()=>pe(()=>import("../js/index-CKQjJMH2.js").then(e=>e.s),__vite__mapDeps([12,4]))}),`../services/firebase/${t}.js`,4);e.set(t,r)}return e.get(t)})}},Xt=()=>{if("undefined"!=typeof window&&"IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting){const r=t.target;r.src=r.dataset.src,r.classList.remove("lazy"),e.unobserve(r)}})});document.querySelectorAll("img[data-src]").forEach(t=>{e.observe(t)})}},Zt={preloadCritical:!0,useCache:!0,monitorPerformance:!0,optimizeImages:!0,autoCleanup:!0};((e=Zt)=>{e.preloadCritical&&[()=>pe(()=>import("../js/Toast-Byppis9I.js"),__vite__mapDeps([10,2,3,1,4])),()=>pe(()=>import("../js/ConfirmModal-DAyGJZmo.js"),__vite__mapDeps([9,3,2,1,4])),()=>pe(()=>import("../js/VideoPlayer-D1f-kd4k.js"),__vite__mapDeps([20,2,4,3,1]))].forEach(e=>{e().catch(()=>{})}),e.monitorPerformance&&"undefined"!=typeof window&&window.performance&&new PerformanceObserver(e=>{for(const t of e.getEntries())t.entryType}).observe({entryTypes:["navigation","paint"]}),e.optimizeImages&&"undefined"!=typeof window&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",Xt):Xt()),Jt(),Yt(),Qt()})(),me.createRoot(document.getElementById("root")).render(ue.jsx(m.StrictMode,{children:ue.jsx(Kt,{})}));export{Ae as A,xe as B,Se as C,Re as D,Ne as E,Pe as F,je as G,Ie as H,we as I,He as J,Ke as K,Je as L,Ye as M,Qe as N,Xe as O,Ze as P,et as Q,yt as R,be as S,pe as _,Dt as a,It as b,he as c,st as d,ot as e,at as f,ht as g,dt as h,gt as i,ue as j,ft as k,mt as l,lt as m,vt as n,Et as o,ve as p,_e as q,ct as r,ut as s,it as t,jt as u,rt as v,We as w,qe as x,Ge as y,$e as z};
