var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(s,t,r)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,o=(e,s,t)=>new Promise((r,a)=>{var n=e=>{try{o(t.next(e))}catch(s){a(s)}},i=e=>{try{o(t.throw(e))}catch(s){a(s)}},o=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,i);o((t=t.apply(e,s)).next())});import{u as l,j as c,n as d,o as m}from"../assets/index-BamraMjv.js";import{r as x}from"./vendor-react-SlK7pBj5.js";import{u as p,a as u}from"./vendor-router-UcgXoTZX.js";import{AlertCircle as h,Crown as f,LucideUser as g,LucideShield as b,CheckCircle as j,Lock as y,EyeOff as v,Eye as w,ArrowRight as N}from"./vendor-icons-BWQzNHDY.js";import"./vendor-firebase-CCu_Fqhx.js";const k=()=>{var e,k,P;const{invitationCode:C}=p(),S=u(),{validateInvitation:O,createUserByInvitation:L}=l(),[E,I]=x.useState(!0),[D,U]=x.useState(!1),[q,A]=x.useState(!1),[B,F]=x.useState({type:"",text:""}),[H,R]=x.useState(null),[T,V]=x.useState({password:"",confirmPassword:""});x.useEffect(()=>{$()},[C]);const $=()=>o(void 0,null,function*(){try{const e=yield O(C);e.success?(R(e.invitation),F({type:"",text:""})):F({type:"error",text:e.error})}catch(e){F({type:"error",text:"Error al validar la invitación"})}finally{I(!1)}}),z=e=>{var o,l;V((o=((e,s)=>{for(var t in s||(s={}))a.call(s,t)&&i(e,t,s[t]);if(r)for(var t of r(s))n.call(s,t)&&i(e,t,s[t]);return e})({},T),l={[e.target.name]:e.target.value},s(o,t(l))))};return E?c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-orange-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Validando invitación..."})]})}):H?c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-orange-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"max-w-md w-full space-y-8",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mx-auto h-16 w-16 bg-gradient-to-r from-pink-500 to-orange-500 rounded-full flex items-center justify-center mb-4",children:c.jsx(f,{className:"h-8 w-8 text-white"})}),c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"¡Bienvenido a SalsaHacks!"}),c.jsx("p",{className:"text-gray-600",children:"Completa tu registro para acceder a la plataforma"})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[c.jsx(g,{className:"h-8 w-8 text-blue-600"}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:H.displayName}),c.jsx("p",{className:"text-sm text-gray-500",children:H.email})]})]}),c.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[c.jsx(b,{className:"h-5 w-5 text-gray-400"}),c.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${m[H.role]||"bg-gray-500 text-white"}`,children:d[H.role]||H.role})]}),c.jsxs("div",{className:"text-xs text-gray-500",children:[c.jsxs("p",{children:["Usuario: ",c.jsx("strong",{children:H.username})]}),c.jsxs("p",{children:["Expira: ",c.jsx("strong",{children:(null==(P=null==(k=null==(e=H.expiresAt)?void 0:e.toDate)?void 0:k.call(e))?void 0:P.toLocaleDateString("es-ES"))||"Próximamente"})]})]})]}),B.text&&c.jsxs("div",{className:"p-4 rounded-lg flex items-center space-x-2 "+("success"===B.type?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"),children:["success"===B.type?c.jsx(j,{className:"h-5 w-5"}):c.jsx(h,{className:"h-5 w-5"}),c.jsx("span",{className:"text-sm font-medium",children:B.text})]}),c.jsxs("form",{className:"mt-8 space-y-6",onSubmit:e=>o(void 0,null,function*(){if(e.preventDefault(),U(!0),F({type:"",text:""}),T.password!==T.confirmPassword)return F({type:"error",text:"Las contraseñas no coinciden"}),void U(!1);if(T.password.length<6)return F({type:"error",text:"La contraseña debe tener al menos 6 caracteres"}),void U(!1);try{const e=yield L(C,T.password);e.success?(F({type:"success",text:"¡Cuenta creada exitosamente! Redirigiendo..."}),setTimeout(()=>{S("/auth")},2e3)):F({type:"error",text:e.error})}catch(s){F({type:"error",text:s.message})}finally{U(!1)}}),children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contraseña"}),c.jsxs("div",{className:"relative",children:[c.jsx(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),c.jsx("input",{id:"password",name:"password",type:q?"text":"password",required:!0,value:T.password,onChange:z,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-200",placeholder:"••••••••",minLength:6}),c.jsx("button",{type:"button",onClick:()=>A(!q),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:q?c.jsx(v,{className:"h-5 w-5"}):c.jsx(w,{className:"h-5 w-5"})})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar Contraseña"}),c.jsxs("div",{className:"relative",children:[c.jsx(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),c.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:q?"text":"password",required:!0,value:T.confirmPassword,onChange:z,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-200",placeholder:"••••••••",minLength:6})]})]})]}),c.jsx("button",{type:"submit",disabled:D,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-pink-500 to-orange-500 hover:from-pink-600 hover:to-orange-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:D?c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),c.jsx("span",{children:"Creando cuenta..."})]}):c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{children:"Crear Cuenta"}),c.jsx(N,{className:"h-4 w-4"})]})})]}),c.jsx("div",{className:"text-center",children:c.jsx("p",{className:"text-xs text-gray-500",children:"Al crear tu cuenta, aceptas los términos y condiciones de SalsaHacks"})})]})}):c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-orange-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:c.jsx("div",{className:"max-w-md w-full space-y-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx(h,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Invitación Inválida"}),c.jsx("p",{className:"text-gray-600 mb-6",children:B.text||"Esta invitación no es válida o ha expirado"}),c.jsx("button",{onClick:()=>S("/auth"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-pink-500 to-orange-500 hover:from-pink-600 hover:to-orange-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 transition-all duration-200",children:"Ir al Login"})]})})})};export{k as default};
