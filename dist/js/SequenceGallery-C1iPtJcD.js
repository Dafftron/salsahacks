var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,c=(s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t;import{j as n,a as l}from"../assets/index-mYjtELNp.js";import{r as o}from"./vendor-react-SlK7pBj5.js";import d from"./ConfirmModal-Cfzn2kHc.js";import m from"./Toast-CVNbJKaV.js";import{LucidePlay as u,Image as x,LucideUsers as h,Download as p,Edit3 as f,LucideTrash2 as g}from"./vendor-icons-BWQzNHDY.js";import{u as b}from"./CompactCardActions-CNXDRJY5.js";import"./vendor-router-UcgXoTZX.js";import"./vendor-firebase-DVYjp8kH.js";const j=e=>{var l=e,{src:d,alt:m,className:h="",fallbackSrc:p="/placeholder-video.svg",showPlayIcon:f=!1}=l,g=((e,s)=>{var a={};for(var c in e)r.call(e,c)&&s.indexOf(c)<0&&(a[c]=e[c]);if(null!=e&&t)for(var c of t(e))s.indexOf(c)<0&&i.call(e,c)&&(a[c]=e[c]);return a})(l,["src","alt","className","fallbackSrc","showPlayIcon"]);const[b,j]=o.useState(!1),[y,v]=o.useState(!0),N=!d||null==d||"https://via.placeholder.com/400x225/1a1a1a/ffffff?text=VIDEO"===d||"https://via.placeholder.com/300x200/1a1a1a/ffffff?text=EVENTO"===d,w=N||b?p:d;return n.jsxs("div",(E=((e,s)=>{for(var a in s||(s={}))r.call(s,a)&&c(e,a,s[a]);if(t)for(var a of t(s))i.call(s,a)&&c(e,a,s[a]);return e})({className:`relative ${h}`},g),s(E,a({children:[y&&n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-100 to-gray-200 animate-pulse flex items-center justify-center",children:n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-8 h-8 border-3 border-gray-300 border-t-pink-500 rounded-full animate-spin"}),n.jsx("div",{className:"absolute inset-0 w-8 h-8 border-3 border-transparent border-t-pink-300 rounded-full animate-spin",style:{animationDelay:"-0.5s"}})]})}),n.jsx("img",{src:w,alt:m,className:"w-full h-full object-cover transition-all duration-300 "+(y?"opacity-0 scale-95":"opacity-100 scale-100"),onLoad:()=>{v(!1),j(!1)},onError:()=>{v(!1),j(!0)},loading:"lazy",decoding:"async",fetchPriority:"high"}),f&&!y&&n.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center",children:n.jsx("div",{className:"w-8 h-8 bg-white bg-opacity-90 rounded-full flex items-center justify-center",children:n.jsx(u,{className:"w-4 h-4 text-gray-800 fill-current"})})}),(b||N)&&!y&&n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(x,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),n.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Sin miniatura"}),f&&n.jsx("div",{className:"mt-2 w-6 h-6 bg-white bg-opacity-90 rounded-full flex items-center justify-center mx-auto",children:n.jsx(u,{className:"w-3 h-3 text-gray-600 fill-current"})})]})})]}))));var E},y=({sequences:e,onDeleteSequence:s,onPlaySequence:a,onEditSequence:t,onEditThumbnail:r,onDownloadSequence:i,isFullWidth:c=!1,style:y="salsa"})=>{var v;const[N,w]=o.useState([]),[E,C]=o.useState({isOpen:!1,sequence:null}),{categoriesList:S,getColorClasses:O}=b("figuras",y),{getSequenceConfig:k}=l(),q=(e,s="success")=>{const a=Date.now();w(t=>[...t,{id:a,message:e,type:s}])};return 0===e.length?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(u,{className:"w-8 h-8 text-gray-400"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay secuencias guardadas"}),n.jsx("p",{className:"text-gray-500 mb-4",children:"Crea tu primera secuencia usando el constructor de secuencias"}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 max-w-md mx-auto",children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"¿Cómo crear una secuencia?"}),n.jsxs("ol",{className:"text-sm text-blue-800 space-y-1 text-left",children:[n.jsx("li",{children:'1. Haz clic en "CREAR SECUENCIA"'}),n.jsx("li",{children:'2. Añade videos con el botón "+" de la galería'}),n.jsx("li",{children:"3. Escribe un nombre para la secuencia"}),n.jsx("li",{children:'4. Haz clic en "Guardar Secuencia"'}),n.jsx("li",{children:"5. ¡Listo! Aparecerá aquí automáticamente"})]})]})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:`grid gap-6 ${k(c).grid}`,children:e.map(e=>n.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden border border-gray-100 hover:shadow-lg transition-all duration-200 transform hover:scale-[1.02]",children:[n.jsx("div",{className:"relative group",children:n.jsxs("div",{className:`w-full ${k(c).aspect} ${k(c).thumbnailSize} bg-gradient-to-br from-gray-100 to-gray-200 relative overflow-hidden flex items-center justify-center`,children:[e.thumbnailUrl?n.jsx(j,{src:e.thumbnailUrl,alt:e.name,className:"w-full h-full object-cover"}):n.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-500",children:[n.jsx(u,{className:"w-12 h-12 mb-2 text-gray-400"}),n.jsx("span",{className:"text-sm font-medium",children:e.name})]}),n.jsx("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-75 text-white px-2 py-1 rounded text-sm font-medium",children:e.resolution&&"Unknown"!==e.resolution?e.resolution:"HD"}),n.jsx("button",{onClick:s=>{s.stopPropagation(),r&&r(e)},className:"absolute top-2 right-2 bg-black bg-opacity-75 text-white p-1 rounded hover:bg-opacity-90 transition-colors",title:"Editar thumbnail",children:n.jsx(x,{className:"w-3 h-3"})}),n.jsx("button",{onClick:()=>(e=>{try{a(e),q("Reproduciendo secuencia")}catch(s){q("Error al reproducir la secuencia","error")}})(e),className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:n.jsx(u,{className:"w-12 h-12 text-white"})})]})}),n.jsxs("div",{className:""+(k(c).compact?"p-2":"p-4"),children:[n.jsxs("div",{className:"flex items-center justify-between "+(k(c).compact?"mb-1":"mb-2"),children:[n.jsx("h3",{className:`font-semibold text-gray-800 ${k(c).titleSize} truncate`,children:e.name}),n.jsx("div",{className:"flex items-center space-x-1",children:n.jsxs("span",{className:`bg-blue-100 text-blue-800 px-2 py-1 rounded-full ${k(c).compact,"text-xs"} font-medium`,children:[e.videos.length," videos"]})})]}),k(c).showIcons?n.jsx("div",{className:"flex items-center justify-center text-gray-500 mb-2",children:n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(h,{className:"w-3 h-3"}),n.jsxs("span",{className:"text-xs font-medium",children:[e.videos.length," videos"]})]})}):n.jsx("p",{className:`text-gray-600 text-sm ${k(c).compact?"mb-2":"mb-3"} ${1===k(c).descriptionLines?"line-clamp-1":2===k(c).descriptionLines?"line-clamp-2":3===k(c).descriptionLines?"line-clamp-3":"line-clamp-4"}`,children:e.description||"Sin descripción"}),k(c).showTags&&n.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:(()=>{const s=(e=>{if(!e.tags||0===Object.keys(e.tags).length)return[];const s=[];return S.forEach(a=>{const t=e.tags[a.key];Array.isArray(t)&&t.forEach(e=>{s.push({tag:e,categoryKey:a.key,color:a.color})})}),s})(e);return s.length>0?s.map(({tag:e,categoryKey:s,color:a})=>n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${O(a)}`,children:e},`${s}-${e}`)):n.jsx("span",{className:"text-gray-400 text-sm",children:"Sin etiquetas"})})()}),k(c).showStats&&n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 pt-2 border-t border-gray-100",children:[!k(c).compact&&n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(h,{className:"w-4 h-4"}),n.jsxs("span",{className:"font-medium",children:[e.videos.length," videos"]}),n.jsx("span",{className:"text-gray-400",children:"•"}),n.jsx("span",{className:"text-gray-600",children:e.resolution&&"Unknown"!==e.resolution?e.resolution:"HD"})]}),n.jsxs("div",{className:"flex items-center space-x-2 "+(k(c).compact?"w-full justify-center":""),children:[n.jsx("button",{onClick:()=>(e=>{try{i?(i(e),q("Abriendo opciones de descarga")):q("Funcionalidad de descarga no disponible","warning")}catch(s){q("Error al abrir descarga","error")}})(e),className:"text-gray-400 hover:text-green-500 transition-colors duration-200 p-1 rounded hover:bg-green-50",title:"Descargar secuencia",children:n.jsx(p,{className:""+(k(c).compact?"h-3 w-3":"h-4 w-4")})}),n.jsx("button",{onClick:()=>t(e),className:"text-gray-400 hover:text-blue-500 transition-colors duration-200 p-1 rounded hover:bg-blue-50",title:"Editar secuencia",children:n.jsx(f,{className:""+(k(c).compact?"h-3 w-3":"h-4 w-4")})}),n.jsx("button",{onClick:()=>(e=>{C({isOpen:!0,sequence:e})})(e),className:"text-gray-400 hover:text-red-500 transition-colors duration-200 p-1 rounded hover:bg-red-50",title:"Eliminar secuencia",children:n.jsx(g,{className:""+(k(c).compact?"h-3 w-3":"h-4 w-4")})})]})]})]})]},e.id))}),n.jsx(d,{isOpen:E.isOpen,onClose:()=>C({isOpen:!1,sequence:null}),onConfirm:()=>{return e=void 0,a=null,t=function*(){try{yield s(E.sequence.id),q("Secuencia eliminada exitosamente")}catch(e){q("Error al eliminar la secuencia","error")}C({isOpen:!1,sequence:null})},new Promise((s,r)=>{var i=e=>{try{n(t.next(e))}catch(s){r(s)}},c=e=>{try{n(t.throw(e))}catch(s){r(s)}},n=e=>e.done?s(e.value):Promise.resolve(e.value).then(i,c);n((t=t.apply(e,a)).next())});var e,a,t},title:"¿Eliminar secuencia?",message:`¿Estás seguro de que quieres eliminar la secuencia "${null==(v=E.sequence)?void 0:v.name}"? Esta acción no se puede deshacer.`,confirmText:"Eliminar",cancelText:"Cancelar",confirmClassName:"bg-red-500 hover:bg-red-600"}),N.map(e=>n.jsx(m,{message:e.message,type:e.type,onClose:()=>{return s=e.id,void w(e=>e.filter(e=>e.id!==s));var s}},e.id))]})};export{y as default};
