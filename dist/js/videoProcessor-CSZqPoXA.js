const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/vendor-jszip-rPAbbavd.js","js/vendor-react-SlK7pBj5.js"])))=>i.map(i=>d[i]);
import{_ as e}from"../assets/index-_E1YfA--.js";import"./vendor-ffmpeg-BflpXDox.js";import"./vendor-react-SlK7pBj5.js";import"./vendor-router-UcgXoTZX.js";import"./vendor-firebase-DVYjp8kH.js";import"./vendor-icons-BWQzNHDY.js";const r=r=>{return o=void 0,t=null,i=function*(){try{if(!r.videos||0===r.videos.length)throw new Error("La secuencia no tiene videos");if(1===r.videos.length){const e=r.videos[0];if(e.file)return{success:!0,data:e.file,format:"mp4",error:null};if(e.videoUrl){const r=yield fetch(e.videoUrl);if(!r.ok)throw new Error("Error descargando video");return{success:!0,data:yield r.blob(),format:"mp4",error:null}}}const o=new((yield e(()=>import("./vendor-jszip-rPAbbavd.js").then(e=>e.j),__vite__mapDeps([0,1]))).default),t=(r.name||r.title||"secuencia").replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"_").toLowerCase();for(let e=0;e<r.videos.length;e++){const i=r.videos[e];let n;if(i.file)n=i.file;else{if(!i.videoUrl)throw new Error(`Video ${e+1} no tiene archivo ni URL`);{const r=yield fetch(i.videoUrl);if(!r.ok)throw new Error(`Error descargando video ${e+1}`);n=yield r.blob()}}const s=`${t}_${e+1}.mp4`;o.file(s,n)}return{success:!0,data:yield o.generateAsync({type:"blob"}),format:"zip",error:null}}catch(o){return{success:!1,data:null,format:null,error:o.message}}},new Promise((e,r)=>{var n=e=>{try{l(i.next(e))}catch(o){r(o)}},s=e=>{try{l(i.throw(e))}catch(o){r(o)}},l=r=>r.done?e(r.value):Promise.resolve(r.value).then(n,s);l((i=i.apply(o,t)).next())});var o,t,i};export{r as downloadSequenceDirect};
